-- 1. 建立表格
CREATE TABLE IF NOT EXISTS recipe_gallery (
    gallery_id INT NOT NULL AUTO_INCREMENT,
    recipe_id INT NOT NULL,
    user_id INT NOT NULL,
    gallery_text TEXT, 
    upload_at DATETIME NOT NULL,
    gallery_url VARCHAR(255) NOT NULL,
    PRIMARY KEY (gallery_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 2. 清空資料
TRUNCATE TABLE recipe_gallery;

-- 3. 插入資料 (依據你的範例)
INSERT INTO recipe_gallery (
    gallery_id, recipe_id, user_id, gallery_text, upload_at, gallery_url
) VALUES
(1, 1, 5, '經典瑪格麗特披薩，餅皮酥脆，羅勒葉的香氣真的畫龍點睛！', '2026-01-17 10:30:00', 'img/social/32/gallery/1/1.jpg'),
(2, 1, 2, '換個角度拍瑪格麗特披薩，牽絲的起司看起來太誘人了。', '2026-01-17 11:15:00', 'img/social/32/gallery/1/2.jpg'),
(3, 1, 8, '週末午餐的披薩派對，自製的瑪格麗特就是香。', '2026-01-17 12:00:00', 'img/social/32/gallery/1/3.jpg'),
(4, 2, 4, '抹茶熔岩蛋糕成功爆漿！抹茶味超級濃厚，微苦不膩。', '2026-01-17 13:20:00', 'img/social/32/gallery/2/1.jpg'),
(5, 2, 7, '日常下午茶時光，抹茶熔岩蛋糕配黑咖啡真是絕配。', '2026-01-17 13:45:00', 'img/social/32/gallery/2/2.jpg'),
(6, 3, 3, '四川宮保雞丁，火候掌握得剛好，雞肉鮮嫩多汁。', '2026-01-18 10:00:00', 'img/social/32/gallery/3/1.jpg'),
(7, 3, 6, '花生米一定要最後放才酥脆，這道宮保雞丁超下飯。', '2026-01-18 10:15:00', 'img/social/32/gallery/3/2.jpg'),
(8, 3, 2, '今天的晚餐主角，香辣過癮的四川口味。', '2026-01-18 10:30:00', 'img/social/32/gallery/3/3.jpg'),
(9, 3, 8, '特寫一下宮保雞丁的色澤，很有食慾吧！', '2026-01-18 10:45:00', 'img/social/32/gallery/3/4.jpg'),
(10, 4, 5, '奶油松露野菇寬麵，松露醬的味道一打開就散發出來了。', '2026-01-18 11:00:00', 'img/social/32/gallery/4/1.jpg'),
(11, 4, 4, '選用了新鮮野菇，跟奶油醬汁完美融合在寬麵上。', '2026-01-18 11:15:00', 'img/social/32/gallery/4/2.jpg'),
(12, 4, 7, '在家也能做出餐廳質感的松露野菇寬麵。', '2026-01-18 11:30:00', 'img/social/32/gallery/4/3.jpg'),
(13, 4, 3, '最後撒上現磨起司粉，松露寬麵層次感爆發。', '2026-01-18 11:45:00', 'img/social/32/gallery/4/4.jpg'),
(14, 5, 6, '泰式青咖哩雞，香蘭葉與椰奶的結合真的好道地。', '2026-01-18 12:00:00', 'img/social/32/gallery/5/1.jpg'),
(15, 5, 2, '稍微偏辣的青咖哩，拌在飯上可以連吃兩碗。', '2026-01-18 12:15:00', 'img/social/32/gallery/5/2.jpg'),
(16, 5, 8, '燉煮後的雞肉吸滿青咖哩醬汁，非常入味。', '2026-01-18 12:30:00', 'img/social/32/gallery/5/3.jpg'),
(17, 6, 5, '經典班尼迪克蛋，水波蛋切開後的蛋液流出好療癒。', '2026-01-18 13:00:00', 'img/social/32/gallery/6/1.jpg'),
(18, 6, 4, '荷蘭醬比例調得很成功，濃稠度剛好。', '2026-01-18 13:15:00', 'img/social/32/gallery/6/2.jpg'),
(19, 6, 7, '完美的早午餐，班尼迪克蛋配上酥脆瑪芬。', '2026-01-18 13:30:00', 'img/social/32/gallery/6/3.jpg'),
(20, 7, 3, '濃厚豚骨叉燒拉麵，湯頭熬了超久，非常醇厚。', '2026-01-18 14:00:00', 'img/social/32/gallery/7/1.jpg'),
(21, 7, 6, '特製叉燒肉肥而不膩，入口即化。', '2026-01-18 14:15:00', 'img/social/32/gallery/7/2.jpg'),
(22, 8, 2, '經典自製鷹嘴豆泥，淋上橄欖油和紅椒粉，味道好清新。', '2026-01-18 15:00:00', 'img/social/32/gallery/8/1.jpg'),
(23, 8, 8, '拿來沾皮塔餅吃非常順口，健康的下午茶點心。', '2026-01-18 15:15:00', 'img/social/32/gallery/8/2.jpg'),
(24, 8, 5, '打得很細膩的鷹嘴豆泥，口感綿密。', '2026-01-18 15:30:00', 'img/social/32/gallery/8/3.jpg'),
(25, 8, 4, '自製的鷹嘴豆泥裝罐，隨時都能當抹醬。', '2026-01-18 15:45:00', 'img/social/32/gallery/8/4.jpg'),
(26, 9, 7, '法式洋蔥濃湯，洋蔥炒到焦糖化後的甜味太棒了。', '2026-01-18 16:00:00', 'img/social/32/gallery/9/1.png'),
(27, 9, 3, '鋪上法國麵包和起司進爐烤，濃湯精華都在這。', '2026-01-18 16:15:00', 'img/social/32/gallery/9/2.png'),
(28, 9, 6, '冷冷的冬天，來碗暖暖的洋蔥濃湯超幸福。', '2026-01-18 16:30:00', 'img/social/32/gallery/9/3.png'),
(29, 9, 2, '起司烤到微焦，配上濃郁洋蔥湯頭，絕配。', '2026-01-18 16:45:00', 'img/social/32/gallery/9/4.png'),
(30, 10, 8, '蒜香檸檬烤大蝦，檸檬的酸爽跟蝦子的甜味結合。', '2026-01-18 17:00:00', 'img/social/32/gallery/10/1.jpg'),
(31, 10, 5, '蒜末均勻鋪在蝦背上烤，香氣逼人。', '2026-01-18 17:15:00', 'img/social/32/gallery/10/2.jpg'),
(32, 10, 4, '簡單的調味就能帶出烤大蝦的鮮甜。', '2026-01-18 17:30:00', 'img/social/32/gallery/10/3.jpg'),
(33, 11, 7, '舒肥雞胸藜麥飯，低脂又高蛋白的健康組合。', '2026-01-18 18:00:00', 'img/social/32/gallery/11/1.png'),
(34, 11, 3, '舒肥後的雞胸肉真的不乾柴，藜麥飯很有口感。', '2026-01-18 18:15:00', 'img/social/32/gallery/11/2.png'),
(35, 11, 6, '健身後的餐點，藜麥飯跟雞胸肉補充滿滿能量。', '2026-01-18 18:30:00', 'img/social/32/gallery/11/3.png'),
(36, 11, 2, '色香味俱全的輕食餐盒，舒肥雞胸大推。', '2026-01-18 18:45:00', 'img/social/32/gallery/11/4.png'),
(37, 12, 8, '香煎鮭魚糙米便當，魚皮煎得金黃酥脆。', '2026-01-18 19:00:00', 'img/social/32/gallery/12/1.jpg'),
(38, 12, 5, '鮭魚油脂香氣十足，搭配健康糙米飯很有飽足感。', '2026-01-18 19:15:00', 'img/social/32/gallery/12/2.jpg'),
(39, 12, 4, '營養均衡的一餐，香煎鮭魚真的是百吃不厭。', '2026-01-18 19:30:00', 'img/social/32/gallery/12/3.png'),
(40, 13, 7, '蒜香毛豆嫩豬排，第一次嘗試這樣的搭配，驚艷的清爽。', '2026-01-18 20:00:00', 'img/social/32/gallery/13/1.png'),
(41, 13, 3, '豬排醃製得很入味，配上蒜香毛豆增加口感。', '2026-01-18 20:15:00', 'img/social/32/gallery/13/2.jpg'),
(42, 13, 6, '這道蒜香豬排很適合當家常主菜。', '2026-01-18 20:30:00', 'img/social/32/gallery/13/3.jpg'),
(43, 13, 2, '毛豆的甜跟蒜香完美中和了豬排的厚重感。', '2026-01-18 20:45:00', 'img/social/32/gallery/13/4.png'),
(44, 14, 8, '豆腐漢堡排佐野菇，蔬食者的極致享受。', '2026-01-18 21:00:00', 'img/social/32/gallery/14/1.png'),
(45, 14, 5, '豆腐排做得很紮實，野菇醬汁鮮甜濃郁。', '2026-01-18 21:15:00', 'img/social/32/gallery/14/2.jpg'),
(46, 15, 4, '檸檬紙包魚片，鎖住了魚肉所有的鮮甜水分。', '2026-01-19 09:00:00', 'img/social/32/gallery/15/1.png'),
(47, 15, 7, '打開紙包那一刻香氣噴發，檸檬味清新解膩。', '2026-01-19 09:15:00', 'img/social/32/gallery/15/2.png'),
(48, 15, 3, '無油烹飪的極致，紙包魚片健康又美味。', '2026-01-19 09:30:00', 'img/social/32/gallery/15/3.png'),
(49, 16, 6, '日式壽喜燒牛丼，蛋黃液裹在肥美牛肉片上太邪惡了。', '2026-01-19 10:00:00', 'img/social/32/gallery/16/1.png'),
(50, 16, 2, '鹹甜適中的壽喜燒醬汁，牛丼白飯殺手。', '2026-01-19 10:15:00', 'img/social/32/gallery/16/2.png'),
(51, 16, 8, '洋蔥煮到透亮吸滿醬汁，牛丼就是要這樣吃。', '2026-01-19 10:30:00', 'img/social/32/gallery/16/3.jpg'),
(52, 16, 5, '自製豪華版牛丼，肉片疊得跟山一樣高。', '2026-01-19 10:45:00', 'img/social/32/gallery/16/4.png'),
(53, 16, 4, '壽喜燒牛丼特寫，這肉質色澤太夢幻。', '2026-01-19 11:00:00', 'img/social/32/gallery/16/5.png'),
(54, 17, 7, '韓式泡菜炒豬肉，酸辣夠味，配韓劇剛好。', '2026-01-19 12:00:00', 'img/social/32/gallery/17/1.png'),
(55, 17, 3, '泡菜炒出香氣後加入豬五花，肥肉部分焦香美味。', '2026-01-19 12:15:00', 'img/social/32/gallery/17/2.png'),
(56, 17, 6, '這道韓式炒豬肉不管是配飯還是包生菜都很讚。', '2026-01-19 12:30:00', 'img/social/32/gallery/17/3.png'),
(57, 17, 2, '濃郁的紅色醬汁，這就是道地的韓式口味。', '2026-01-19 12:45:00', 'img/social/32/gallery/17/4.png'),
(58, 18, 8, '北海道咖哩雞，湯底加了大量蔬菜泥，非常濃醇。', '2026-01-19 13:00:00', 'img/social/32/gallery/18/1.png'),
(59, 18, 5, '北海道風格就是溫潤，咖哩雞裡面的馬鈴薯軟爛綿密。', '2026-01-19 13:15:00', 'img/social/32/gallery/18/2.png'),
(60, 18, 4, '濃縮了蔬菜精華的北海道咖哩，口感特別豐富。', '2026-01-19 13:30:00', 'img/social/32/gallery/18/3.png'),
(61, 18, 7, '這道咖哩雞非常有家鄉味，熱氣騰騰很幸福。', '2026-01-19 13:45:00', 'img/social/32/gallery/18/4.png'),
(62, 19, 3, '味噌薑汁燒肉，味噌鹹香跟薑汁的微辣層次分明。', '2026-01-19 18:00:00', 'img/social/32/gallery/19/1.png'),
(63, 19, 6, '薑泥炒出香氣後加入味噌，燒肉瞬間風味升級。', '2026-01-19 18:15:00', 'img/social/32/gallery/19/2.png'),
(64, 19, 2, '日式家庭餐桌必備，味噌薑汁燒肉完美示範。', '2026-01-19 18:30:00', 'img/social/32/gallery/19/3.png'),
(65, 20, 8, '照燒鮭魚排，照燒醬汁收得乾乾亮亮的，色澤滿分。', '2026-01-19 19:00:00', 'img/social/32/gallery/20/1.jpg'),
(66, 20, 5, '魚肉中心剛好熟透，照燒風味帶點甜感非常好吃。', '2026-01-19 19:15:00', 'img/social/32/gallery/20/2.jpg');

-- 4. 建立外來鍵指令 (對應規格書要求)
-- 第一個：連結到食譜表 (recipe)
ALTER TABLE recipe_gallery
  ADD CONSTRAINT fk_gallery_recipe FOREIGN KEY (recipe_id) REFERENCES recipes (recipe_id) ON UPDATE CASCADE;

-- 第二個：連結到使用者表 (users)
ALTER TABLE recipe_gallery
  ADD CONSTRAINT fk_gallery_user FOREIGN KEY (user_id) REFERENCES users (user_id) ON UPDATE CASCADE;

COMMIT;